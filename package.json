{
  "name": "xpress",
  "version": "2.4.6",
  "description": "a node.js web and api framework base on express which provide api version and channel control",
  "main": "index.js",
  "bin": {
    "xpress": "./bin/init.js"
  },
  "author": {
    "name": "SYNDE KEYES",
    "email": "812256717@qq.com"
  },
  "dependencies": {
    "art-template": "^3.0.3",
    "async": "*",
    "colors": "^1.1.2",
    "commander": "^2.9.0",
    "debug": "^2.2.0",
    "express": "^4.0.0"
  },
  "engines": {
    "node": ">= 0.12.0"
  },
  "devDependencies": {
    "body-parser": "*",
    "mocha": "*"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/synder/xpress.git"
  },
  "keywords": [
    "express",
    "api",
    "web",
    "framework",
    "xpress"
  ],
  "license": "MIT",
  "readme": "# xpress \n\n\n## What is xpress?\n\n- **Api Framework** A node.js api framework base on express which provide api route version and channel control \n- **Web Framework** A node.js web framework base on express and art-templete, and expand many usefull view helper\n\n## Install\n\n   $ npm install -g xpress\n   \n## Sample code\n> there are two full sample projects in /sample/api and /sample/web\n\n### Run sample project\n```\n#cd ./sample/api\ncd ./sample/web \nnpm install \nnode app.js\n```\n    \n> open http://127.0.0.1:8001/, there are many template engine(base on artTemplate) view helper sample code\n    \n## Create project with commander\n```\nnpm install -g xpress\ncd /<project path>\nxpress -p ./ -t (api | web)\nnpm install\nnpm start\n\n```    \n\n## APi    \n### create an api server with xpress\n```js\n//import module\nvar Xpress = require('Xpress');\nvar config = require('./config');\n```\n\n```js\n//create server\nvar server = new Xpress({\n    host: null,\n    key: null,\n    cert: null,\n    trace: true, //open route trace\n    port: {\n        http: 8001,\n        https: null\n    }\n});\n```\n\n```js\n//configure\nserver.conf('x-powered-by', false);\nserver.conf('trust proxy', true);\nserver.conf('views', config.public.server.view.path);\nserver.conf('view engine',config.public.server.view.engine);\nserver.conf('view cache', false);\nserver.engine('html', Xpress.engine.__express); \n```\n> Xpress.engine is equal require('art-template/node/template-native.js')\n\n```js\n//use middleware\nvar body = require('body-parser');\nvar cookie = require('cookie-parser');\nvar timeout = require('connect-timeout');\nvar compression = require(\"compression\");\nvar statics = require('express-static');\nserver.use(compression());\nserver.use(timeout('20s'));\nserver.use(cookie());\nserver.use(body.json());\nserver.use(body.urlencoded({extended: true}));\nserver.use(statics(config.public.server.statics.path));\n```\n\n```js\n//register an api on a controller with version or channel control\n//'v' represent version and 'c' represent channel\n//if you register an api with version and channel control, \n//you must set 'X-Accept-Version' and 'X-Client-Channel' on request header, \n//xpress will get the two value from the header and compared with the register v and c\n//if not equal, xpress will skip the controller and jump to the next controller which has registered the same route\n//you can get and set the two headers on Xpress.defaults.versionHeader and Xpress.defaults.channelHeader\nserver.get('/user', {v:1.0, c: 'ios'}, function(req, res, next){\n    res.json({\n        users: []\n    });\n});\n//register an api on a controller without version and channel control\nserver.get('/user/:id', function(req, res, next){\n    res.json({\n        name: 'synder',\n        age : 29\n    });\n})\n```\n```js\n//create a sub router and register on server\nvar Router = Xpress.Router;\nvar productRouter = new Router();\n//register an api on subRouter without version or channel control  \n//import utils \nvar string = Xpress.string;\nvar parser = Xpress.parser;\nvar validate = Xpress.validate;\nproductRouter.get('/', function(req, res, next){\n    if(validate.isPassword(req.query.pass)){\n\t\tres.json({\n\t\t\tbankCard: string.bankCard('6666666666666666')    \n\t\t});\n\t}\n})\n//register an api on subRouter with version or channel control  \nproductRouter.get('/:id', {v:1, c:1}, function(req, res, next){\n    var id = parser.parseInt(req.params.id, 10);\n    res.json({\n        id: id\n    });\n})\nserver.sub('/product', productRouter); \n```\n```js\n//error handler\nserver.error(404, function (err, req, res, next) {\n    res.status(404).json('not found');\n});\nserver.error(500, function (err, req, res, next) {\n    res.status(500).json(err.stack);\n});\n```\n```js\n//listen on host and port\nserver.listen(function(message){\n    console.log(message);\n});\n//listen on host and port with cluster\n//server.cluster(0, function(msg){\n//    console.log(msg);\n//});\n```\n```js\n//export\nmodule.exports = server;\n```\n##Integration tools\n### parser\n```javascript\nvar parser = require('xpress').parser;\nparser.parseTime('2016-06-22T04:42:07.228Z');\nparser.parseDate('2016-06-22T04:42:07.228Z');\nparser.parseDateTime('2016-06-22T04:42:07.228Z');\nparser.parseInt('122', 100); //122\nparser.parseInt('a122', 100); //100\nparser.parseFloat('a122', 100); //100\nparser.parseBool('a122'); //true\nparser.parseBool('');     //false\nparser.parseJson('{\"name\":\"synder\"}', null);     //{name:\"synder\"}\nparser.parseJson('{\"name\":\"synder}', null);     //null\n```\n\n### fs\n```javascript\nvar fs = require('xpress').fs;\n//get dir\nfs.homedir(); //return user home dir\nfs.tmpdir();  //return system temp dir\n//get file name or dir\nfs.filename(path);  //return file name \nfs.filedir(path);   //return dir name\n//node navtive fs method\nfs.createReadStream();\nfs.createWriteStream();\nfs.chmod();\nfs.chown();\nfs.link();\nfs.unlink();\nfs.utimes();\nfs.stat();\nfs.access();\nfs.watch();\n//fs extend method\nfs.exists(path, callback);\nfs.mkdir(path, [opt], callback);\nfs.list(path, iterator, callback); //list file or dir in path\nfs.walk(path, iterator, callback); //list all file in path and child path\nfs.read(path, callback);\nfs.readline(path, iterator, callback); //read file by line\nfs.save(path, content, [opt], callback);\nfs.append(path, content, [opt], callback);\nfs.touch(path, [opt], callback);\nfs.copy(src, dst, callback);  //copy file or dir\nfs.move(src, dst, callback);  //cur file or dir\nfs.rename(old, newName, callback);\nfs.md5(filepath, callback);\nfs.fetch(webUrl, dst, [filename], callback); //get file from web\n```\n\n### validate\n```javascript\nvar validate = require('xpress').validate;\nvalidate.isNull(str)\nvalidate.isUndefined(str)\nvalidate.isNullOrUndefined(str)\nvalidate.isDate(val)\nvalidate.isArray(val)\nvalidate.isString(val)\nvalidate.isNumber(num)\nvalidate.isFunction(val)\nvalidate.isNaN(val)\nvalidate.isRegExp(val)\nvalidate.isBool(val)\nvalidate.isInt(num)\nvalidate.isFloat(num)\nvalidate.isObject(obj)\nvalidate.isDictionary(obj)\nvalidate.isBuffer(obj)\nvalidate.isSymbol(str)\nvalidate.isRequired(str)\nvalidate.isMobile(str)\nvalidate.isEmail(str)\nvalidate.isPassword(str)\nvalidate.isChinese(str)\nvalidate.isBankCard(str)\nvalidate.isChineseIdCard(str)\nvalidate.isIPV4Address(str)\n```\n\n### string\n```javascript\nvar string = require('xpress').string;\nstring.date(new Date(), '-')              //2016-04-20\nstring.time(new Date(), ':')              //10:03:20\nstring.dateTime(new Date(), '-', ':')     //2016-04-20 10:03:20\nstring.format('%s name is', 'synder')     //synder name is\nstring.pad('12222', 10, '0', 'left')      //'0000012222'\nstring.pad('12222', 10, '0', 'right')     //'1222200000'\nstring.pad('12222', 10, '0', 'both')      //'0001222200'\nstring.unit(10, 'px')                     //10px\nstring.mask('18083489462', '*', 4, 5)         //180*****442\nstring.join('', null, 10, undefined, 20, '+') //10 + 20\nstring.trim('  name  ')        //name\nstring.quote(\"name\", '\"')      //\"name\"\nstring.clean('my   name  is')  //my name is\nstring.lines('my\\rname\\ris')   //['my', 'name', 'is']\nstring.signed(10)    //+10\nstring.signed(-10)   //-10\nstring.stringify()\nstring.truncate('122212313213132132', 13, '...') //1222123132...\nstring.capitalize()\nstring.upperCase()\nstring.lowerCase()\nstring.currency(242605401.001, '$', 3)     //$242,605,401.001\nstring.chineseCurrency('90002600401.001')  //玖佰亿零贰佰陆拾萬零肆佰零壹\nstring.thousands(242605401.001)         //242,605,401.001\nstring.bankCard('233546454633344332')   //2335 4645 4633 3443 32\nstring.percentage(0.5)                  //50%\nstring.percentage(0.5, 2)               //50.00%\nstring.number(0.5, 3)                   //0.500\n```\n\n## View helper(base on [art-template](https://www.npmjs.com/package/art-template))\n<table cellspacing=\"0\" cellpadding=\"0\">\n    <tr>\n        <td>&lt;%= $dateTime(new Date())%&gt;</td>\n        <td>2016年06月07日 11时56分38秒</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $dateTime(Date.now())%&gt;</td>\n        <td>2016年06月07日 11时56分38秒</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $Math.random()%&gt;</td>\n        <td>0.035149546630335315</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $toString([1,2,3])%&gt;</td>\n        <td>[1,2,3]</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $parseInt('10', 0)%&gt;</td>\n        <td>10</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $parseInt('NA0122', 0)%&gt;</td>\n        <td>0</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $parseInt('NA0122')%&gt;</td>\n        <td>null</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $parseFloat('12.3')%&gt;</td>\n        <td>12.3</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $parseFloat('a12.3', 0)%&gt;</td>\n        <td>0</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $format('%s %X', 'sam', 1000)%&gt;</td>\n        <td>sam 0x3E8</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $format('%s %o', 'sam', 1000)%&gt;</td>\n        <td>sam 01750</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $format('%s %d', 'sam', 1000)%&gt;</td>\n        <td>sam 1000</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $format('%s %b', 'sam', 1000)%&gt;</td>\n        <td>sam 1111101000</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $format('%c %c', 'sam', 98)%&gt;</td>\n        <td>sam b</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $format('%s %2f', 'sam', 98)%&gt;</td>\n        <td>sam 98.00</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $format('%s %j', 'sam', {name:1})%&gt;</td>\n        <td>sam {\"name\":1}</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $toString(null)%&gt;</td>\n        <td></td>\n    </tr>\n    <tr>\n        <td>&lt;%= $toString({name: 1})%&gt;</td>\n        <td>{\"name\":1}</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $toString([12,3])%&gt;</td>\n        <td>[12,3]</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $join('10', '2', '6', '+')%&gt;</td>\n        <td>10+2+6</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $join('10', null, '6', '9', '+')%&gt;</td>\n        <td>10+6+9</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $join(null, null, '6', '+')%&gt;</td>\n        <td>6</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $join(null, '6', '', '+')%&gt;</td>\n        <td>6</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $trim('  name  ')%&gt;</td>\n        <td>name</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $mask('18083489462', '*', 4, 5)%&gt;</td>\n        <td>180*****462</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $mask('18083489462', '*', -1, 5)%&gt;</td>\n        <td>18083******</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $pad('12222', 10, '0', 'left')%&gt;</td>\n        <td>0000012222</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $pad('12222', 10, '0', 'right')%&gt;</td>\n        <td>1222200000</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $clean(' 122 22 ')%&gt;</td>\n        <td>122 22</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $toString($lines('122\\r\\n22132'))%&gt;</td>\n        <td>[122,22132]</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $toString($lines('122\\r22132'))%&gt;</td>\n        <td>[122,22132]</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $truncate('122212313213132132', 13, '...')%&gt;</td>\n        <td>1222123132...</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $chineseCurrency('92102600401.001')%&gt;</td>\n        <td>玖佰贰拾壹亿零贰佰陆拾萬零肆佰零壹</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $currency(242605401.001, '$', 2)%&gt;</td>\n        <td>$242,605,401.00</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $upperCase('AbddessSww')%&gt;</td>\n        <td>ABDDESSSWW</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $lowerCase('AbddessSww')%&gt;</td>\n        <td>abddesssww</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $capitalize('AbddessSww')%&gt;</td>\n        <td>AbddessSww</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $capitalize('AbddessSww', true)%&gt;</td>\n        <td>Abddesssww</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $bankCard('233546454633344332')%&gt;</td>\n        <td>2335 4645 4633 3443 32</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $number(0.5, 3)%&gt;</td>\n        <td>0.500</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $thousands(2783619263)%&gt;</td>\n        <td>2,783,619,263</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $percentage(0.5)%&gt;</td>\n        <td>50%</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $percentage(0.523366, 2)%&gt;</td>\n        <td>52.34%</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $urlPathVersion('/name', 10)%&gt;</td>\n        <td>/name?version=10</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $urlPathJoin('/name', '//age')%&gt;</td>\n        <td>/name/age</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $urlFormat('/home', {name:1}, 'http', '127.0.0.1')%&gt;</td>\n        <td>http://127.0.0.1/home?name=1</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $urlFormat('/home', {name:1})%&gt;</td>\n        <td>/home?name=1</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $encodeURIComponent('/测试 账号')%&gt;</td>\n        <td>%2F%E6%B5%8B%E8%AF%95%20%E8%B4%A6%E5%8F%B7</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $decodeURIComponent($encodeURIComponent('/测试 账号'))%&gt;</td>\n        <td>/测试 账号</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $encodeURI('/测试 账号')%&gt;</td>\n        <td>/%E6%B5%8B%E8%AF%95%20%E8%B4%A6%E5%8F%B7</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $decodeURI($encodeURI('/测试 账号'))%&gt;</td>\n        <td>/测试 账号</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $date('2016-06-01T07:05:36.838Z', '-')%&gt;</td>\n        <td>2016-06-01</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $time('2016-06-01T07:05:36.838Z', ':')%&gt;</td>\n        <td>15:05:37</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $dateTime('2016-06-01T07:05:36.838Z', '-', ':')%&gt;</td>\n        <td>2016-06-01 15:05:37</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $dateTime('2016-06-01T07:05:36.838Z')%&gt;</td>\n        <td>2016年06月01日 15时05分37秒</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isNull(null)%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isNull(undefined)%&gt;</td>\n        <td>false</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isUndefined(undefined)%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isUndefined(null)%&gt;</td>\n        <td>false</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isNullOrUndefined(null)%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isNullOrUndefined(undefined)%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isArray([])%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isDate(new Date())%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isDate('2012-03-01')%&gt;</td>\n        <td>false</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isString('name')%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isString({})%&gt;</td>\n        <td>false</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isString(null)%&gt;</td>\n        <td>false</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isNumber(1)%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isBool(true)%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isInt(1.1)%&gt;</td>\n        <td>false</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isInt(1)%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isFloat(1.1)%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isFloat(1)%&gt;</td>\n        <td>false</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isObject(null)%&gt;</td>\n        <td>false</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isObject({})%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isObject([])%&gt;</td>\n        <td>true</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isDictionary([])%&gt;</td>\n        <td>false</td>\n    </tr>\n    <tr>\n        <td>&lt;%= $isDictionary({})%&gt;</td>\n        <td>true</td>\n    </tr>\n</table>\n\n## art-template\n> refer to [art-template](https://www.npmjs.com/package/art-template)\n\n## express\n> refer to [express.js](http://www.expressjs.com)",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/synder/xpress/issues"
  },
  "_id": "xpress@2.4.6",
  "dist": {
    "shasum": "57b06a04c1ba56aa8c9af6da6981b2dc749a4d6a"
  },
  "_from": "xpress@",
  "_resolved": "https://registry.npmjs.org/xpress/-/xpress-2.4.6.tgz"
}
